

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How-To: OpenStack on RAX Cloud Servers &mdash; Rackspace Documentation Guides  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/bespoke.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/bolditalic.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Rackspace Documentation Guides  documentation" href="../index.html"/>
        <link rel="up" title="RPC team documentation" href="index.html"/>
        <link rel="next" title="How-To: RPC Docs with a fork" href="HowTo-docs-rpc-With-A-Fork.html"/>
        <link rel="prev" title="How-To: OpenStack on Rackspace Ubuntu Cloud Servers" href="HowTo-OpenStack-On-RAX-Cloud-Ubuntu.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Rackspace Documentation Guides
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../contributor-collateral/index.html">Contribute to Rackspace documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">RPC team documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="HowTo-BestPractices.html">RPCDocs Best practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowTo-OpenStack-On-RAX-Cloud-CentOS.html">How-To: OpenStack on RAX CentOS Cloud Servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowTo-OpenStack-On-RAX-Cloud-Ubuntu.html">How-To: OpenStack on Rackspace Ubuntu Cloud Servers</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">How-To: OpenStack on RAX Cloud Servers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#network-architecture">Network architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="#prepare-cloud-environment">Prepare cloud environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#networks">Networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#launch-servers">Launch servers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#jump-box-node-robb-dev1">Jump box node (robb-dev1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#openstack-controller-node-robb-controller1">OpenStack controller node (robb-controller1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#openstack-network-node-robb-net1">OpenStack network node (robb-net1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#openstack-compute-node-robb-comp1">OpenStack compute node (robb-comp1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#install-and-configure-openstack-services">Install and configure OpenStack services</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="HowTo-docs-rpc-With-A-Fork.html">How-To: RPC Docs with a fork</a></li>
<li class="toctree-l2"><a class="reference internal" href="rpcdocs-interaction.html">RPC Docs + the rest of RPC = better docs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../style-guide/index.html">Style guidelines for technical content</a></li>
<li class="toctree-l1"><a class="reference internal" href="../templates/index.html">Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Rackspace Documentation Guides</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">RPC team documentation</a> &raquo;</li>
        
      <li>How-To: OpenStack on RAX Cloud Servers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/rpc/HowTo-OpenStack-On-RAX-Cloud-RR.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-openstack-on-rax-cloud-servers">
<h1>How-To: OpenStack on RAX Cloud Servers<a class="headerlink" href="#how-to-openstack-on-rax-cloud-servers" title="Permalink to this headline">#</a></h1>
<p>(Based on Matt's doc)</p>
<p>This how-to provides instructions for building the prerequisite
infrastructure for installing multi-host OpenStack environments on RAX
cloud servers using the official installation guide.</p>
<p>The infrastructure contains three OpenStack nodes operating on private
(tenant) networks managed by a network services (jump/firewall) node.
The latter protects the OpenStack nodes from direct internet access and
provides internet connectivity to instances in the environment.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li>Prepare RAX cloud environment.</li>
<li>Build and configure network services (jump/firewall) node.</li>
<li>Build and configure OpenStack nodes.</li>
<li>Install and configure OpenStack services with minor modifications to
the official installation guide.</li>
</ul>
</div>
<div class="section" id="network-architecture">
<h2>Network architecture<a class="headerlink" href="#network-architecture" title="Permalink to this headline">#</a></h2>
<div class="figure">
<img alt="Network architecture" src="../_images/openstack-on-rax-cloud-arch.png" />
</div>
</div>
<div class="section" id="prepare-cloud-environment">
<h2>Prepare cloud environment<a class="headerlink" href="#prepare-cloud-environment" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li>Upload a public key.</li>
</ul>
</div>
<div class="section" id="networks">
<h2>Networks<a class="headerlink" href="#networks" title="Permalink to this headline">#</a></h2>
<p>Create the following networks:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The CIDR you assign does not have to match the CIDR initially
assigned to a network when the network is created in the RAX cloud
control panel. You can specify any valid subnet. Multiple networks can
use the same subnet without collision as shown in the following example:</p>
</div>
<ol class="arabic">
<li><p class="first">robb-test-net</p>
<p>192.168.20.0/24</p>
</li>
<li><p class="first">robb-vmnet</p>
<p>192.168.27.0/24</p>
</li>
<li><p class="first">robb-ext1</p>
<p>192.168.33.0/24</p>
</li>
</ol>
</div>
<div class="section" id="launch-servers">
<h2>Launch servers<a class="headerlink" href="#launch-servers" title="Permalink to this headline">#</a></h2>
<div class="section" id="jump-box-node-robb-dev1">
<h3>Jump box node (robb-dev1)<a class="headerlink" href="#jump-box-node-robb-dev1" title="Permalink to this headline">#</a></h3>
<ol class="arabic">
<li><p class="first">Launch node.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">  OS: Ubuntu 14.04 (Trusty Tahr) PVHVM</span>
<span class="go">  Flavor: 1 GB Performance 1</span>
<span class="go">  Networks: PublicNet, ServiceNet, robb-test-net, robb-ext1</span>

<span class="go">.. note::</span>

<span class="go">   Adding multiple tenant networks simultaneously yields inconsistent</span>
<span class="go">   network interface device names. This guide adds one tenant network at a</span>
<span class="go">   time as it becomes necessary. Also, changing tenant networks after</span>
<span class="go">   configuration erases changes made in this guide.</span>
</pre></div>
</div>
</li>
<li><p class="first">Access the node from the internet using the IP address assigned by
RAX.</p>
</li>
<li><p class="first">Update node.</p>
<p><code class="docutils literal"><span class="pre">apt-get</span> <span class="pre">update</span> <span class="pre">&amp;&amp;</span> <span class="pre">apt-get</span> <span class="pre">dist-upgrade</span></code></p>
</li>
<li><p class="first">Install additional packages.</p>
<p><code class="docutils literal"><span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">ntp</span> <span class="pre">shorewall</span></code></p>
</li>
<li><p class="first">Reboot node.</p>
</li>
<li><p class="first">Add the <em>robb-test-net</em> network to node.</p>
</li>
<li><p class="first">Add the <em>robb-ext1</em> network to node.</p>
</li>
<li><p class="first">Configure addtional network interfaces.</p>
</li>
<li><p class="first">Edit the /etc/network/interfaces file.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> Label robb-test-net
<span class="go"> auto eth3</span>
<span class="go"> iface eth2 inet static</span>
<span class="go">   address 192.168.20.1</span>
<span class="go">   netmask 255.255.255.0</span>

<span class="gp"> #</span> Label robb-ext1
<span class="go"> auto eth4</span>
<span class="go"> iface eth3 inet static</span>
<span class="go">   address 192.168.33.1</span>
<span class="go">   netmask 255.255.255.0</span>

<span class="gp"> #</span> Label vxlan1
<span class="go"> auto vxlan1</span>
<span class="go"> iface vxlan1 inet static</span>
<span class="go">   pre-up ip link add vxlan1 type vxlan id 1 group 239.0.0.1 dev eth3</span>
<span class="go">   address 192.168.28.1</span>
<span class="go">   netmask 255.255.255.0</span>
<span class="go">   post-down ip link del vxlan1</span>
</pre></div>
</div>
</li>
<li><p class="first">Restart the network interfaces.</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">ifdown eth3 &amp;&amp; ifup eth3</span>
<span class="go">ifdown eth4 &amp;&amp; ifup eth4</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Bring up the vxlan1 interface.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">ifup vxlan1</span>
</pre></div>
</div>
</li>
<li><p class="first">Configure the firewall service.</p>
</li>
<li><p class="first">Edit the <code class="docutils literal"><span class="pre">/etc/shorewall/shorewall.conf</span></code> file.</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">IP_FORWARDING</span><span class="o">=</span><span class="n">Yes</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Edit the /etc/shorewall/interfaces file.</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ext</span> <span class="n">eth0</span> <span class="o">-</span> <span class="n">routefilter</span><span class="p">,</span><span class="n">tcpflags</span>
<span class="n">snet</span> <span class="n">eth1</span>
<span class="n">rtnet</span> <span class="n">eth3</span>
<span class="n">rext1</span> <span class="n">eth4</span>
<span class="n">rvxln</span> <span class="n">vxlan1</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Edit the /etc/shorewall/masq file.</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">eth0</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">20.0</span><span class="o">/</span><span class="mi">24</span>
<span class="n">eth0</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">28.0</span><span class="o">/</span><span class="mi">24</span>
<span class="n">eth0</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">33.0</span><span class="o">/</span><span class="mi">24</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Edit the /etc/shorewall/policy file.</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span>$FW all ACCEPT
ext all REJECT
snet all ACCEPT
rtnet all ACCEPT
rext1 all ACCEPT
rvxln all ACCEPT
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Edit the /etc/shorewall/rules file.</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span>Ping/ACCEPT ext $FW
SMTP/ACCEPT ext $FW
ACCEPT ext $FW tcp 32
SSH/ACCEPT ext $FW
HTTPS/ACCEPT ext $FW
ACCEPT ext $FW udp 60001:61000
DNAT ext rtnet:192.168.20.11 tcp www
DNAT ext rtnet:192.168.20.11 tcp 6080
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Uncomment the DNAT rules and restart Shorewall as necessary to
enable remote access to the dashboard and instance consoles in the
OpenStack environment.</p>
</div>
</div></blockquote>
</li>
<li><p class="first">Edit the <code class="docutils literal"><span class="pre">/etc/shorewall/zones</span></code> file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<blockquote>
<div><p>Shorewall zone names are limited to 5 characters.</p>
</div></blockquote>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">fw</span> <span class="n">firewall</span>
<span class="n">ext</span> <span class="n">ipv4</span>
<span class="n">snet</span> <span class="n">ipv4</span>
<span class="n">rtnet</span> <span class="n">ipv4</span>
<span class="n">rext1</span> <span class="n">ipv4</span>
<span class="n">rvxln</span> <span class="n">ipv4</span>
</pre></div>
</div>
</div>
</li>
<li><p class="first">Edit the /etc/default/shorewall file.</p>
<blockquote>
<div><dl class="docutils">
<dt>::</dt>
<dd><p class="first last">startup=1</p>
</dd>
</dl>
</div></blockquote>
</li>
<li><p class="first">Check the shorewall configuration.</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># shorewall check</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Start the firewall service.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">service shorewall start</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="openstack-controller-node-robb-controller1">
<h3>OpenStack controller node (robb-controller1)<a class="headerlink" href="#openstack-controller-node-robb-controller1" title="Permalink to this headline">#</a></h3>
<ol class="arabic">
<li><p class="first">Launch node</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">| OS: Ubuntu 14.04 (Trusty Tahr) PVHVM</span>
<span class="go">|  Flavor: 4 GB Performance 1</span>
<span class="go">|  Networks: robb-test-net</span>
</pre></div>
</div>
</li>
<li><p class="first">Access the node from the jump box node using the IP address assigned
by RAX.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The node cannot access the internet without additional configuration.</p>
</div>
</li>
<li><p class="first">Configure network interfaces.</p>
</li>
<li><p class="first">Edit the <code class="docutils literal"><span class="pre">/etc/network/interfaces</span></code> file.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> Label robb-test-net
<span class="go">auto eth0</span>
<span class="go">iface eth0 inet static</span>
<span class="go">    address 192.168.20.11</span>
<span class="go">    netmask 255.255.255.0</span>
<span class="go">    gateway 192.168.20.1</span>
<span class="go">    dns-nameservers 72.3.128.241 72.3.128.240</span>
</pre></div>
</div>
</li>
<li><p class="first">Edit the <code class="docutils literal"><span class="pre">/etc/hosts</span></code> file.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># robb-controller</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">20.11</span>   <span class="n">robb</span><span class="o">-</span><span class="n">controller</span>

<span class="c1"># robb-net1</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">20.21</span>   <span class="n">robb</span><span class="o">-</span><span class="n">net1</span>

<span class="c1"># robb-comp1</span>
<span class="mf">192.168</span><span class="o">.</span><span class="mf">20.31</span>   <span class="n">robb</span><span class="o">-</span><span class="n">comp1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Comment out or remove any existing lines containing <em>robb-controller</em>.</p>
</div>
</li>
<li><p class="first">Reboot node.</p>
</li>
<li><p class="first">Access the node from the network services node using the new IP
address on the <em>robb-test-net</em> network.</p>
</li>
<li><p class="first">Test network connectivity to the internet.</p>
</li>
<li><p class="first">Update node.</p>
<p>code-block:: console</p>
<blockquote>
<div><p>apt-get update &amp;&amp; apt-get dist-upgrade</p>
</div></blockquote>
</li>
<li><p class="first">Reboot node.</p>
</li>
</ol>
</div>
<div class="section" id="openstack-network-node-robb-net1">
<h3>OpenStack network node (robb-net1)<a class="headerlink" href="#openstack-network-node-robb-net1" title="Permalink to this headline">#</a></h3>
<ol class="arabic simple">
<li>Launch node.</li>
</ol>
<div class="line-block">
<div class="line">OS: Ubuntu 14.04 (Trusty Tahr) PVHVM</div>
<div class="line">&nbsp;Flavor: 1 GB Performance 1</div>
<div class="line">&nbsp;Networks: robb-test-net</div>
</div>
<ol class="arabic">
<li><p class="first">Access the node from the network services node using the IP address
assigned by RAX.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The node cannot access the internet without additional configuration.</p>
</div>
</li>
<li><p class="first">Add the <em>robb-vmnet</em> network to node.</p>
</li>
<li><p class="first">Add the <em>robb-ext1</em> network to node.</p>
</li>
<li><p class="first">Configure network interfaces.</p>
</li>
<li><p class="first">Edit the <code class="docutils literal"><span class="pre">/etc/network/interfaces</span></code> file.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> Label robb-test-net
<span class="go">auto eth0</span>
<span class="go">iface eth0 inet static</span>
<span class="go">    address 192.168.20.21</span>
<span class="go">    netmask 255.255.255.0</span>
<span class="go">    gateway 192.168.20.1</span>
<span class="go">    dns-nameservers 72.3.128.241 72.3.128.240</span>

<span class="gp">#</span> Label robb-vmnet
<span class="go">auto eth1</span>
<span class="go">iface eth1 inet static</span>
<span class="go">    address 192.168.27.21</span>
<span class="go">    netmask 255.255.255.0</span>

<span class="gp">#</span> Label robb-ext1
<span class="go">auto eth2</span>
<span class="go">iface eth2 inet static</span>
<span class="go">    address 192.168.33.21</span>
<span class="go">    netmask 255.255.255.0</span>

<span class="gp">#</span> Label vxlan1
<span class="go">auto vxlan1</span>
<span class="go">iface vxlan1 inet static</span>
<span class="go">    pre-up ip link add vxlan1 type vxlan id 1 group 239.0.0.1 dev eth2</span>
<span class="go">    address 192.168.28.21</span>
<span class="go">    netmask 255.255.255.0</span>
<span class="go">    post-down ip link del vxlan1</span>
</pre></div>
</div>
</li>
<li><p class="first">Edit the <code class="docutils literal"><span class="pre">/etc/hosts</span></code> file.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> robb-controller
<span class="go">192.168.20.11   robb-controller</span>

<span class="gp">#</span> robb-net1
<span class="go">192.168.20.21   robb-net1</span>

<span class="gp">#</span> robb-comp1
<span class="go">192.168.20.31   robb-comp1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Comment out or remove any existing lines containing <em>robb-net1</em>.</p>
</div>
</li>
<li><p class="first">Reboot node.</p>
</li>
<li><p class="first">Access the node from the network services node using the new IP
address on the <em>robb-test-net</em> network.</p>
</li>
<li><p class="first">Test network connectivity to the internet.</p>
</li>
<li><p class="first">Update node.</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">apt-get update &amp;&amp; apt-get dist-upgrade</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple">
<li>Reboot node.</li>
</ol>
</div>
<div class="section" id="openstack-compute-node-robb-comp1">
<h3>OpenStack compute node (robb-comp1)<a class="headerlink" href="#openstack-compute-node-robb-comp1" title="Permalink to this headline">#</a></h3>
<ol class="arabic">
<li><p class="first">Launch the node.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">| OS: Ubuntu 14.04 (Trusty Tahr) PVHVM</span>
<span class="go">| Flavor:</span>
<span class="go">|  \* 2 GB Performance 1 (supports several CirrOS instances) \* 4 or 8</span>
<span class="go">   GB Performance 1 (supports a couple of Ubuntu/Fedora instances)</span>

<span class="go">Networks: robb-test-net</span>
</pre></div>
</div>
</li>
<li><p class="first">Access the node from the network services node using the IP address
assigned by RAX.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The node cannot access the internet without additional configuration.</p>
</div>
</li>
<li><p class="first">Add the <em>robb-vmnet</em> network to node.</p>
</li>
<li><p class="first">Configure network interfaces.</p>
</li>
<li><p class="first">Edit the /etc/network/interfaces file.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> Label robb-test-net
<span class="go">auto eth0</span>
<span class="go">iface eth0 inet static</span>
<span class="go">    address 192.168.20.31</span>
<span class="go">    netmask 255.255.255.0</span>
<span class="go">    gateway 192.168.20.1</span>
<span class="go">    dns-nameservers 72.3.128.241 72.3.128.240</span>

<span class="gp">#</span> Label robb-vmnet
<span class="go">auto eth1</span>
<span class="go">iface eth1 inet static</span>
<span class="go">    address 192.168.27.31</span>
<span class="go">    netmask 255.255.255.0</span>
</pre></div>
</div>
</li>
<li><p class="first">Edit the <code class="docutils literal"><span class="pre">/etc/hosts</span></code> file.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> robb-controller
<span class="go">192.168.20.11   robb-controller</span>

<span class="gp">#</span> robb-net1
<span class="go">192.168.20.21   robb-net1</span>

<span class="gp">#</span> robb-comp1
<span class="go">192.168.20.31   robb-comp1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Comment out or remove any existing lines containing <em>robb-comp1</em>.</p>
</div>
</li>
<li><p class="first">Reboot node.</p>
</li>
<li><p class="first">Access the node from the network services node using the new IP
address on the <em>robb-test-net</em> network.</p>
</li>
<li><p class="first">Test network connectivity to the internet.</p>
</li>
<li><p class="first">Update node.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">apt-get update &amp;&amp; apt-get dist-upgrade</span>
</pre></div>
</div>
</li>
<li><p class="first">Reboot node.</p>
</li>
</ol>
</div>
<div class="section" id="install-and-configure-openstack-services">
<h3>Install and configure OpenStack services<a class="headerlink" href="#install-and-configure-openstack-services" title="Permalink to this headline">#</a></h3>
<ol class="arabic">
<li><p class="first">Use the <a class="reference external" href="http://docs.openstack.org/juno/install-guide/install/apt/content/">OpenStack Installation Guide</a>
with the following changes:</p>
</li>
<li><p class="first">Configuring the basic environment on all nodes:</p>
<ul class="simple">
<li>Skip the network configuration sections.</li>
<li>Use 192.168.20.1 (jump box node) as the NTP server.</li>
</ul>
</li>
<li><p class="first">Configuring the Compute service on the compute node:</p>
<p>Use <em>qemu</em> instead of <em>kvm</em> virtualization.</p>
</li>
<li><p class="first">Configuring the Networking service on the network node:</p>
<p>Add the <em>vxlan1</em> interface as a port on the <em>br-ex</em> bridge.</p>
</li>
<li><p class="first">Creating initial networks.</p>
<p>Use the following command for the subnet on the external network:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">neutron subnet-create ext-net --name ext-subnet \</span>
<span class="go">--allocation-pool start=192.168.28.101,end=192.168.28.200 \</span>
<span class="go">--disable-dhcp --gateway 192.168.28.1 192.168.28.0/24</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">After performing the initial tenant network creation procedure,
try pinging 192.168.28.101 from the network services node.</p>
</div>
</li>
</ol>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="HowTo-docs-rpc-With-A-Fork.html" class="btn btn-neutral float-right" title="How-To: RPC Docs with a fork" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="HowTo-OpenStack-On-RAX-Cloud-Ubuntu.html" class="btn btn-neutral" title="How-To: OpenStack on Rackspace Ubuntu Cloud Servers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Rackspace.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>